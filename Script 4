CREATE TABLE TBUsuarios(
    ATId_Usuario INT GENERATED BY DEFAULT ON NULL AS IDENTITY,
	ATNombre varchar2(50),
    ATApellido_1 varchar2(50),
	ATApellido_2 varchar2(50),
    ATCedula varchar2(30),
    ATActivo char(1) check ( ATActivo in ( '0', '1' )),
    ATRol varchar2(50),
    ATId_Correo int,
    ATId_Telefono int,
    PRIMARY KEY(ATId_usuario)
);

ALTER TABLE TBUsuarios ADD CONSTRAINT fk_usuarios_correos FOREIGN KEY (ATId_Correo) REFERENCES TBCorreo (ATId_Correo);
ALTER TABLE TBUsuarios ADD CONSTRAINT fk_usuarios_telefonos FOREIGN KEY (ATId_Telefono) REFERENCES TBTelefono (ATId_Telefono);

CREATE TABLE TBDonacion(
    ATId_Donacion INT GENERATED BY DEFAULT ON NULL AS IDENTITY,
	ATFecha date,
    ATProcedencia  varchar2(80),
    ATCantidad int,
    ATDescripcion varchar2(500),
    ATTipoDonacion varchar2(60),
    ATId_Usuario int,
    ATId_Donante int,
    ATId_Donatario int,
    ATId_Sede int,
    PRIMARY KEY(ATId_Donacion)
);

ALTER TABLE TBDonacion ADD CONSTRAINT fk_donacion_usuario FOREIGN KEY (ATId_Usuario) REFERENCES TBUsuarios (ATId_usuario);
ALTER TABLE TBDonacion ADD CONSTRAINT fk_donacion_sede FOREIGN KEY (ATId_Sede) REFERENCES TBSede (ATId_Sede);


CREATE TABLE TBSede(
    ATId_Sede INT GENERATED BY DEFAULT ON NULL AS IDENTITY,
	ATCedula_Juridica varchar2(50),
    ATId_Localizacion int,
    ATId_Correo int,
    ATId_Telefono int,
    PRIMARY KEY(ATId_Sede)
);

ALTER TABLE TBSede ADD CONSTRAINT fk_sede_correos FOREIGN KEY (ATId_Correo) REFERENCES TBCorreo (ATId_Correo);
ALTER TABLE TBSede ADD CONSTRAINT fk_sede_telefonos FOREIGN KEY (ATId_Telefono) REFERENCES TBTelefono (ATId_Telefono);
ALTER TABLE TBSede ADD CONSTRAINT fk_sede_localizacion FOREIGN KEY (ATId_Localizacion) REFERENCES TBLocalizacion (ATId_Localizacion);

CREATE TABLE TBCorreo(
    ATId_Correo INT GENERATED BY DEFAULT ON NULL AS IDENTITY,
	ATCorreo varchar2(150),
    PRIMARY KEY(ATId_correo)
);

CREATE TABLE TBTelefono(
    ATId_telefono INT GENERATED BY DEFAULT ON NULL AS IDENTITY,
	ATTelefono varchar2(150),
    PRIMARY KEY(ATId_telefono)
);

CREATE TABLE TBLocalizacion(
    ATId_Localizacion INT GENERATED BY DEFAULT ON NULL AS IDENTITY,
	ATProvincia varchar2(50),
    ATCanton varchar2(50),
    ATDistrito varchar2(50),
    ATDireccionExacta varchar2(50),
    PRIMARY KEY(ATId_Localizacion)
);
 

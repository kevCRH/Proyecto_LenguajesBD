CREATE TABLE TBUsuarios(
    ATId_Usuario INT GENERATED BY DEFAULT ON NULL AS IDENTITY,
	ATNombre varchar(50),
    ATApellido_1 varchar(50),
	ATApellido_2 varchar(50),
    ATCedula varchar(30),
    ATActivo char(1) check ( ATActivo in ( '0', '1' )),
    ATRol varchar(50),
    ATId_Correo int,
    ATId_Telefono int,
    PRIMARY KEY(ATId_usuario,ATId_Correo,ATId_Telefono)
);

ALTER TABLE TBUsuarios ADD CONSTRAINT fk_usuarios_correos FOREIGN KEY (ATId_Correo) REFERENCES TBCorreo (ATId_Correo);
ALTER TABLE TBUsuarios ADD CONSTRAINT fk_usuarios_telefonos FOREIGN KEY (ATId_Telefono) REFERENCES TBTelefono (ATId_Telefono);

CREATE TABLE TBUDonante(
    ATId_Donante INT GENERATED BY DEFAULT ON NULL AS IDENTITY,
	ATNombre varchar(50),
    ATApellido_1 varchar(50),
	ATApellido_2 varchar(50),
    ATCedula varchar(30),
    ATId_Correo int,
    ATId_Telefono int,
    PRIMARY KEY(ATId_Donante,ATId_Correo,ATId_Telefono)
);

ALTER TABLE TBUDonante ADD CONSTRAINT fk_donantes_correos FOREIGN KEY (ATId_Correo) REFERENCES TBCorreo (ATId_Correo);
ALTER TABLE TBUDonante ADD CONSTRAINT fk_donantes_telefonos FOREIGN KEY (ATId_Telefono) REFERENCES TBTelefono (ATId_Telefono);

CREATE TABLE TBDonatario(
    ATId_Donatario INT GENERATED BY DEFAULT ON NULL AS IDENTITY,
	ATNombre varchar(50),
    ATApellido_1 varchar(50),
	ATApellido_2 varchar(50),
    ATCedula varchar(30),
    ATId_Correo int,
    ATId_Telefono int,
    PRIMARY KEY(ATId_Donatario,ATId_Correo,ATId_Telefono)
);

ALTER TABLE TBDonatario ADD CONSTRAINT fk_donatario_correos FOREIGN KEY (ATId_Correo) REFERENCES TBCorreo (ATId_Correo);
ALTER TABLE TBDonatario ADD CONSTRAINT fk_donatario_telefonos FOREIGN KEY (ATId_Telefono) REFERENCES TBTelefono (ATId_Telefono);

CREATE TABLE TBSede(
    ATId_Sede INT GENERATED BY DEFAULT ON NULL AS IDENTITY,
	ATCedula_Juridica varchar(50),
    ATId_Localizacion int,
    ATId_Correo int,
    ATId_Telefono int,
    PRIMARY KEY(ATId_Sede,ATId_Correo,ATId_Telefono)
);

ALTER TABLE TBSede ADD CONSTRAINT fk_sede_correos FOREIGN KEY (ATId_Correo) REFERENCES TBCorreo (ATId_Correo);
ALTER TABLE TBSede ADD CONSTRAINT fk_sede_telefonos FOREIGN KEY (ATId_Telefono) REFERENCES TBTelefono (ATId_Telefono);
ALTER TABLE TBSede ADD CONSTRAINT fk_sede_localizacion FOREIGN KEY (ATId_Localizacion) REFERENCES TBLocalizacion (ATId_Localizacion);

CREATE TABLE TBCorreo(
    ATId_Correo INT GENERATED BY DEFAULT ON NULL AS IDENTITY,
	ATCorreo varchar(150),
    PRIMARY KEY(ATId_correo)
);

CREATE TABLE TBTelefono(
    ATId_telefono INT GENERATED BY DEFAULT ON NULL AS IDENTITY,
	ATTelefono varchar(150),
    PRIMARY KEY(ATId_telefono)
);

CREATE TABLE TBLocalizacion(
    ATId_Localizacion INT GENERATED BY DEFAULT ON NULL AS IDENTITY,
	ATProvincia varchar(50),
    ATCanton varchar(50),
    ATDistrito varchar(50),
    ATDireccionExacta varchar(50),
    PRIMARY KEY(ATId_Localizacion)
);
